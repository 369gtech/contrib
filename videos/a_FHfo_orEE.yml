# Contribution guide: https://github.com/watch-devtube/contrib

# speaker:
#   name: _____
#   twitter: _____ # mandatory twitter handle; must not include @

# tags: [____, _____, _____]

title: 'NVDIMM & Bcache: Support Non-Volatile Memory for Linux Block Layer... Coly (Yong) Li & Qiaowei Ren'
language: English
recordingDate: 1639858941
description: "Don’t miss out! Join us at our next event: KubeCon + CloudNativeCon Europe 2022 in Valencia, Spain from May 17-20. Learn more at https://kubecon.io The conference features presentations from developers and end users of Kubernetes, Prometheus, Envoy, and all of the other CNCF-hosted projects.\n\nNVDIMM 和 Bcache：支持 Linux 块层缓存的非易失性存储器 | NVDIMM & Bcache: Support Non-Volatile Memory for Linux Block Layer Cache - Coly (Yong) Li, SUSE & Qiaowei Ren, Intel\n\nNVDIMM 和 Bcache：支持英特尔 DCPMM（数据中心持久性存储器模块）驱动的 Linux 块层缓存 NVDIMM（非易失性双列直插式内存模块）的非易失性存储器使得非易失性存储技术成为高性能存储行业的一场革命。bcache 子系统作为 Linux 块层缓存，被广泛应用于虚拟化、分布式存储和数据库工作负载中，以提高存储性能。在联想和英特尔的支持下，自 2020 年起，我们开始支持面向 bcache 的 NVDIMM。与其它子系统的不同之处在于，我们首先开发了一个专门针对 NVDIMM 的页面分配器，并将 NVDIMM 空间作为非易失性页面进行管理。然后，基于该非易失性存储器页面分配器（被称为 nvmpg 分配器），Bcache 可管理和访问其元数据，因为相较于传统的磁盘输入/输出方法，这些元数据更多地存储于存储页面中。本演讲将介绍 nvmpg 分配器的设计方式及其当前的状态。作为一个用例，大家还可以看到 bcache 如何使用 nvmpg 分配器将其日志数据存储到非易失性存储器页面中。作为实验代码，nvmpg 分配器和 bcache 日志记录在 NVDIMM 上的初步成果起效良好，目标是将 Linux 5.15 合并窗口用于上游。\n\nNVDIMM & Bcache: Support Non-Volatile Memory for Linux Block Layer Cache NVDIMM (Non-Volatile Dual In-line Memory Module) powered by Intel DCPMM (Data Center Persistent Memory Module) makes the Non-Volatile Memory technology to be a revolution in high performance storage industry. The bcache subsystem, as a Linux block layer cache to accelerate storage performance, is widely deployed in virtualization, distributed storage and data base workloads. With the support by Lenovo and Intel, since 2020 we start to support NVDIMM for bcache. The difference from other subsystem is, we firstly develop a page allocator specific for NVDIMM, and manage the NVDIMM space as non-volatile pages. Then based on this nvm pages allocator (called nvmpg allocator) Bcache manages and accesses its meta data as they are stored in memory pages more than legacy disk I/O method. This talk will introduce how the nvmpg allocator is designed and its current status. As a use case, people may also see how bcache uses nvmpg allocator to store its journaling data into the non-volatile memory pages. The initial effort of both the nvmpg allocator and bcache journaling on NVDIMM works fine as EXPERIMENTAL code, and is aiming Linux 5.15 merge window for going upstream."
