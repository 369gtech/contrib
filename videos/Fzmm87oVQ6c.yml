# Editing guidelines: https://github.com/watch-devtube/contrib/#how-to-edit-video-metadata


tags:
    - unix
title: 'My personal fight against the modern laptop'
recordingDate: 1485125160
description: "Hamish Coleman\nhttp://linux.conf.au/schedule/presentation/48/\nIn this talk, I will take you through the tools and techniques\r\nI used to reverse engineer the keyboard controller in my Thinkpad\r\nlaptop and re-flash it with custom firmware.  This will cover how the\r\nThinkpad range of laptops have tried to secure their firmware from\r\nunauthorised changes.  Finally, I will present my ongoing work to\r\nreverse engineer the protocol used between the BIOS and the vendor's\r\nflash update tool (which included writing a custom virtual machine\r\nto emulate a minimal laptop).\r\n\r\nI was driven to start this project when I realised that the laptops\r\ncurrently on sale just did not meet my requirements.  Even the durable\r\nThinkpad laptops I have preferred in the past are being dumbed down.\r\nEventually, I will need a new laptop - and with the current offerings,\r\nI just do not want anything I can purchase off the shelf.  I knew\r\nI was not going to be able to build my own laptop from scratch\r\n(and having discounted all the current free/open laptop offerings)\r\nso I started looking at what I could hack together.\r\n\r\nTo keep the project achievable, I reduced my laptop gripes as far\r\nas I could and focused on just the keyboard - asking the question:\r\n\"Can I shoehorn an older keyboard in a modern laptop?\"  Eventually\r\nanswering it with \"yes, sometimes.\"\r\n\r\nIt turned out to be easily possible to physically replace the\r\nkeyboard on any of the Thinkpads in the xx30 series with one from the\r\nxx20 series.  I was stalled with a half-working keyboard until early\r\n2016 when Zmatt published how he unlocked his laptop.  The firmware\r\nchanges needed were bundled up into a complete build system which\r\nothers have used to replicate the keyboard replacement. However,\r\nwith both these laptop series' being several years old now, I am\r\nstill looking at forward porting this to a newer laptop - which has\r\nled me to research the hardware and firmware design there.\r\n\r\nI will also take the audience through my current knowledge of how\r\nthe vendor's protocol to tell the BIOS to write a new image to\r\nflash works.  Now that it is possible to write new code for the\r\nembedded controller and to install it and run it - I wanted to\r\nknow how secure this was (or wasn't) separate to simply \"fixing\"\r\nthe keyboard.  I have written a custom virtualisation tool to host\r\nthe vendors \"dosflash\" program and capture the protocol it uses to\r\nrequest that the BIOS write a new image to flash.\r\n\r\nIt is my hope that others will be inspired to look closer at their\r\nhardware and to give them both some tools and the confidence that\r\nit is possible to \"fix\" the way that consumer hardware works."
