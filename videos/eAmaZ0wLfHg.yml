# Contribution guide: https://github.com/watch-devtube/contrib

# speaker:
#   name: _____
#   twitter: _____ # mandatory twitter handle; must not include @

# tags: [____, _____, _____]

title: '"Large Virtual Address support (52-bit) in ARM64 kernel" - Bhupesh Sharma (LCA 2021 Online)'
recordingDate: 1612445907
description: "Bhupesh Sharma\n\nhttps://lca2021.linux.org.au/schedule/presentation/74/\n\nWith ARMv8.2 architecture extensions becoming available in new / upcoming ARM64 CPUs, two new hardware extensions, namely - LVA (Large Virtual Addressing)\r\nand LPA (Large Physical Addressing) are also being supported in open-source software now.\r\n\r\nStarting from Linux kernel version 5.4, the 52-bit (Large) Virtual Address (VA) and Physical Address (PA) support was introduced for the ARM64\r\nkernel. Although the kernel documentation describes these features (see [1] for more details) and how they impact the new kernels running on older CPUs (which don't support 52-bit VA extension in hardware) and the newer CPUs (which support 52-bit VA extension in hardware), it is still at-times complex for a normal user to understand the same and understand how one can \"opt-in\" for receiving VAs from a 52-bit space.\r\n\r\nIn this talk, I explain how:\r\nA. the kernel memory layout gets \"flipped\" for ARM64 after the support for these features were added,\r\nB. user-space applications, especially the ones which provide debugging support (e.g. kexec-tools, makedumpfile and crash-utility) get impacted because of the same, and\r\nC. how user-space applications can \"opt-in\" to receiving VAs from a 52-bit space by specifying an mmap hint parameter that is larger than 48-bit.\r\n\r\n[1]. https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/Documentation/arm64/memory.rst [Kernel documentation describing the memory map]\n\nlinux.conf.au is a conference about the Linux operating system, and all aspects of the thriving ecosystem of Free and Open Source Software that has grown up around it. Run since 1999, in a different Australian or New Zealand city each year, by a team of local volunteers, LCA invites more than 500 people to learn from the people who shape the future of Open Source. For more information on the conference see https://linux.conf.au/\n\nProduced by Next Day Video Australia: https://nextdayvideo.com.au\n\n#linux.conf.au #linux #foss #opensource\n\nMon Jan 25 15:45:00 2021 at Blemings Labs"
